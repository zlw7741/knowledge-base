
##### Redission限流原理
使用令牌桶算法，单位时间内向漏桶注入固定令牌，当桶满时，不注入令牌，每个请求向漏桶取出一个令牌，如果有令牌，拿令牌通过，如果没有令牌，则不允许通过。

框架主要用到redisson的RRateLimiter,也可以使用redisson-spring-boot-starter代替（底层封装redisson）

首先设置限流的令牌数、产生令牌的间隔时间、时间类型

* 原理：用到两种数据类型，String、zset
    * string:用 于存储限流令牌数
    * zset: 时间戳、随机数

* 计算过期时间：系统当前时间-时间间隔
* 剩余时间：当前时间戳 - 限流器第一个scope值

#### 存储流程：
##### 第一次获取令牌：
* 1.用string类型存储令牌数
* 2.使用zset存储当前令牌标识（当前时间戳、随机数）
* 3.存储的令牌数减一
##### 第二次获取令牌：
* 1.计算过期时间=系统当前时间-时间间隔，遍历zset,获取需要删除的令牌数量
* 2.如果需要删除的令牌数>0
    * 2.1删除有序集合过期的令牌数量
    * 2.2设置当前剩余令牌数量
* 3.如果当前令牌数<所需令牌数 说明令牌不足
    * 3.1 获取限流器的第一个scope值
    * 3.2 返回剩余时间 = 当前时间戳-限流器第一个scope值
* 4.如果当前令牌数 >= 所需令牌数
    * 4.1 存入新令牌数据 （时间戳、随机数）
    * 4.2 存储的令牌-1，返回null
        

